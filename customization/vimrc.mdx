---
title: Creating and Organizing vimrc
description: Learn how to create, organize, and structure your Vim configuration file for optimal customization.
---

The vimrc (Vim resource configuration) file is the primary way to customize Vim's behavior. This guide covers how to create, organize, and maintain an effective vimrc configuration.

## What is vimrc?

The vimrc file contains Ex commands that Vim executes automatically when it starts. This allows you to set options, define mappings, create autocommands, and customize Vim to your preferences.

## vimrc Location

The vimrc file location depends on your operating system:

- **Unix/Linux/macOS**: `~/.vimrc`
- **Windows**: `$VIM\_vimrc`
- **Amiga**: `s:.vimrc`
- **Haiku**: `~/config/settings/vim/vimrc`
- **OpenVMS**: `sys$login:.vimrc`

## Creating Your First vimrc

Vim provides an example vimrc file to help you get started. Here's a basic structure:

```vim
" Get the defaults that most users want
source $VIMRUNTIME/defaults.vim

" Basic settings
set nocompatible        " Use Vim defaults instead of Vi
set number              " Show line numbers
set relativenumber      " Show relative line numbers
set ruler               " Show cursor position
set showcmd             " Show incomplete commands

" Enable syntax highlighting
if has('syntax')
  syntax on
endif
```

## Organizing Your vimrc

### Use Comments Effectively

Comments help you (and others) understand your configuration:

```vim
" ==============================================================================
" BASIC SETTINGS
" ==============================================================================

" Display settings
set number              " Show line numbers
set cursorline          " Highlight current line

" ==============================================================================
" SEARCH SETTINGS
" ==============================================================================

set hlsearch            " Highlight search results
set incsearch           " Incremental search
```

<Warning>
In Vim9 script, comments start with `#` when preceded by whitespace. In legacy script, comments start with `"`.
</Warning>

### Group Related Settings

Organize settings by functionality:

```vim
" Editor behavior
set backspace=indent,eol,start  " Allow backspacing over everything
set autoindent                   " Copy indent from current line
set hidden                       " Allow hidden buffers

" File handling
set backup                       " Keep a backup file
set undofile                     " Persistent undo
if has('persistent_undo')
  set undodir=~/.vim/undo       " Undo file location
  if !isdirectory(&undodir)
    call mkdir(&undodir, 'p')
  endif
endif

" Search settings
set ignorecase          " Case-insensitive search
set smartcase           " Case-sensitive if uppercase present
set hlsearch            " Highlight search results
if &t_Co > 2 || has("gui_running")
  set hlsearch          " Highlight last used search pattern
endif
```

## Conditional Settings

Use conditional statements to adapt to different environments:

```vim
" OS-specific settings
if has('win32') || has('win64')
  set guifont=Consolas:h11
else
  set guifont=Monospace\ 11
endif

" Feature-specific settings
if has('mouse')
  set mouse=a
endif

if has('clipboard')
  set clipboard=unnamed
endif

" Terminal-specific settings
if &term =~ "xterm"
  set t_Co=256
endif
```

## Backup and Undo Files

Properly configure backup and undo files from the example vimrc:

```vim
if has("vms")
  set nobackup          " VMS doesn't need backups
else
  set backup            " Keep a backup file
  if has('persistent_undo')
    set undofile        " Keep an undo file (undo changes after closing)
  endif
endif

" Set backup directory
set backupdir=~/.vim/backup
if !isdirectory(&backupdir)
  call mkdir(&backupdir, 'p')
endif
```

## Using Autocommand Groups

From the example vimrc, use autocommand groups to organize autocommands:

```vim
" Put these in an autocmd group, so that we can delete them easily
augroup vimrcEx
  au!  " Remove all vimrcEx autocommands

  " For all text files set 'textwidth' to 78 characters
  autocmd FileType text setlocal textwidth=78
  
  " Jump to last known cursor position
  autocmd BufReadPost *
    \ if line("'\"')
 > 1 && line("'\"'") <= line("$") |
    \   exe "normal! g`\"" |
    \ endif
augroup END
```

<Warning>
Always use `au!` at the start of an autocommand group to clear previous autocommands. This prevents duplicates when sourcing your vimrc multiple times.
</Warning>

## Sourcing the Runtime Defaults

Vim provides sensible defaults that most users want:

```vim
" Get the defaults that most users want
source $VIMRUNTIME/defaults.vim

" Your custom settings here will override the defaults
set number
set relativenumber
```

## Loading Optional Packages

From the example vimrc, load optional packages:

```vim
" Add optional packages
" The ! means the package won't be loaded right away but when plugins are
" loaded during initialization
if has('syntax') && has('eval')
  packadd! matchit
endif
```

## Modular Configuration

For large configurations, split your vimrc into multiple files:

```vim
" Main vimrc
runtime! config/settings.vim
runtime! config/mappings.vim
runtime! config/plugins.vim
runtime! config/autocommands.vim
```

Create these files in `~/.vim/config/`:

- `settings.vim` - Basic options
- `mappings.vim` - Key mappings
- `plugins.vim` - Plugin configuration
- `autocommands.vim` - Autocommands

## Best Practices

### 1. Check for Features

```vim
if has('syntax')
  syntax enable
endif

if has('autocmd')
  filetype plugin indent on
endif
```

### 2. Use Full Option Names

Use full names for clarity:

```vim
" Good
set number
set relativenumber

" Less clear
set nu
set rnu
```

### 3. Document Your Settings

```vim
" Set tab width to 4 spaces for Python files
autocmd FileType python setlocal tabstop=4 shiftwidth=4 expandtab
```

### 4. Avoid Sourcing Multiple Times

```vim
" Use guards to prevent re-execution
if exists('g:loaded_my_vimrc')
  finish
endif
let g:loaded_my_vimrc = 1
```

## Testing Your vimrc

Test changes without restarting Vim:

```vim
" Source your vimrc
:source $MYVIMRC

" Or use a mapping
nnoremap <Leader>sv :source $MYVIMRC<CR>
```

<Warning>
Some settings (like `encoding` or `compatible`) must be set early and may require restarting Vim to take effect.
</Warning>

## Example Complete vimrc

Here's a complete example based on the Vim source:

```vim
" Vim configuration file
" Maintainer: Your Name
" Last Change: 2024

" Bail out if running as evim
if v:progname =~? "evim"
  finish
endif

" Get the defaults that most users want
source $VIMRUNTIME/defaults.vim

" ==============================================================================
" BASIC SETTINGS
" ==============================================================================

set nocompatible        " Use Vim defaults
set number              " Show line numbers
set ruler               " Show cursor position
set showcmd             " Show incomplete commands

" ==============================================================================
" BACKUP AND UNDO
" ==============================================================================

if has("vms")
  set nobackup
else
  set backup
  if has('persistent_undo')
    set undofile
  endif
endif

" ==============================================================================
" SEARCH
" ==============================================================================

if &t_Co > 2 || has("gui_running")
  set hlsearch
endif

" ==============================================================================
" AUTOCOMMANDS
" ==============================================================================

augroup vimrcEx
  au!
  autocmd FileType text setlocal textwidth=78
augroup END

" ==============================================================================
" OPTIONAL PACKAGES
" ==============================================================================

if has('syntax') && has('eval')
  packadd! matchit
endif
```

## Related Topics

- [Setting Options](/customization/options) - Learn about Vim options
- [Autocommands](/customization/autocommands) - Automate tasks
- [Key Mappings](/customization/mappings) - Create custom key bindings
